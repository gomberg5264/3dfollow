<h2 class="mt-5">Mes dernières demandes en attente</h2>

{% set hasManyTeam = app.user.teams|length > 1 %}

<table class="table">
    <thead>
        <tr>
            {% if hasManyTeam %}
                <th>Imprimeur</th>
            {% endif %}
            <th>Nom</th>
            <th>Quantité</th>
            <th>Actions</th>
        </tr>
    </thead>
    <tbody>
        {% for print_request in member_print_requests %}
            <tr>
                {% if hasManyTeam %}
                    <td>{{ print_request.team.creator }}</td>
                {% endif %}
                <td>{{ print_request.name }}</td>
                <td>{{ print_request.quantity }}</td>
                <td>
                    <a href="{{ path('print_request_edit', {'id': print_request.id}) }}" class="btn btn-primary">Modifier</a>
                </td>
            </tr>
        {% else %}
            <tr>
                <td colspan="{{ hasManyTeam ? 4 : 3 }}">Votre liste en attente est vide.</td>
            </tr>
        {% endfor %}
    </tbody>
</table>

<div class="text-center">
    <a href="{{ path('print_request_index') }}" class="btn btn-primary">Voir toutes mes demandes</a>
</div>

<h2 class="mt-5">Groupes</h2>

{% if app.user.teams|length > 0 %}
    <p>
        Vous êtes actuellement membre de ces groupes :
    </p>

    <table class="table">
        <thead>
            <tr>
                <th>Imprimeur</th>
                <th>Actions</th>
            </tr>
        </thead>
        <tbody>
            {% for team in app.user.teams %}
                <tr>
                    <td>{{ team.creator }}</td>
                    <td>
                        <a href="{{ path('print_request_new', {id: team.id}) }}" class="btn btn-success">Ajouter un élément à imprimer dans la liste de {{ team.creator }}</a>
                    </td>
                </tr>
            {% endfor %}
        </tbody>
    </table>
{% else %}
    <p>
        Vous n'êtes actuellement membre d'aucun groupe.<br />
        Demander d'abord à vous faire inviter à un groupe existant pour pouvoir exploiter au mieux 3D Follow.<br />
        <br />
        Si vous possédez vous-même une imprimante 3D, pensez à cocher la case correspondante dans votre profil.<br />
        Cela vous permettra d'accéder à de nouvelles fonctionnalités.
    </p>
    <div class="text-center">
        <a class="btn btn-outline-primary" href="{{ path('account_index') }}">Modifier mon profil</a>
    </div>
{% endif %}
